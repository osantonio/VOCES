{% set usuario_actual = request.state.usuario_actual %}
<aside id="app-sidebar" class="fixed inset-y-0 left-0 z-40 w-64 bg-card text-card-foreground border-r border-border transform -translate-x-full transition-transform duration-200 ease-out">
    <div class="h-full flex flex-col">
        <div class="h-16 px-4 flex items-center border-b border-border">
            <span class="text-sm font-semibold text-muted-foreground">Menú</span>
        </div>
        <nav class="flex-1 overflow-y-auto py-4" aria-label="Sidebar">
            <ul class="space-y-1 px-2">
                <li>
                    <a href="/" class="flex items-center gap-2 px-3 py-2 rounded-md text-sm hover:bg-accent hover:text-accent-foreground text-foreground">
                        <span class="material-symbols-outlined text-base">home</span>
                        <span>Inicio</span>
                    </a>
                </li>
                <li>
                    <a href="/usuarios" class="flex items-center gap-2 px-3 py-2 rounded-md text-sm hover:bg-accent hover:text-accent-foreground text-foreground">
                        <span class="material-symbols-outlined text-base">group</span>
                        <span>Usuarios</span>
                    </a>
                </li>
                <li>
                    <a href="/logs" class="flex items-center gap-2 px-3 py-2 rounded-md text-sm hover:bg-accent hover:text-accent-foreground text-foreground">
                        <span class="material-symbols-outlined text-base">history</span>
                        <span>Actividad</span>
                    </a>
                </li>
                {% if usuario_actual %}
                <li>
                    <a href="/dashboard" class="flex items-center gap-2 px-3 py-2 rounded-md text-sm hover:bg-accent hover:text-accent-foreground text-foreground">
                        <span class="material-symbols-outlined text-base">dashboard</span>
                        <span>Dashboard</span>
                    </a>
                </li>
                {% endif %}
            </ul>
        </nav>

        <div class="mt-auto p-3 border-t border-border">
            {% if usuario_actual %}
            <a href="/usuarios/{{ usuario_actual.username }}" class="flex items-center gap-3 px-3 py-2 rounded-md hover:bg-accent hover:text-accent-foreground">
                {% if usuario_actual.avatar_url %}
                <img src="{{ usuario_actual.avatar_url }}" alt="Avatar" class="w-8 h-8 rounded-full border border-border">
                {% else %}
                <span class="inline-flex items-center justify-center w-8 h-8 rounded-full bg-accent text-accent-foreground text-xs font-semibold">{{ user_initials(usuario_actual) }}</span>
                {% endif %}
                <div class="min-w-0">
                    <p class="text-sm font-medium truncate">{{ usuario_actual.nombres }} {{ usuario_actual.apellidos }}</p>
                    <p class="text-xs text-muted-foreground truncate">@{{ usuario_actual.username }}</p>
                </div>
            </a>
            {% else %}
            <a href="/auth/login" class="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-9 px-3 w-full">Iniciar Sesión</a>
            {% endif %}
        </div>
    </div>
</aside>

<div id="sidebar-overlay" class="fixed inset-0 z-30 bg-black/40 hidden sm:hidden" aria-hidden="true"></div>
